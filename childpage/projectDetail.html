<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
    <title>项目详情 - 城市360</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
    <!-- CSS  -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <!-- Custom.css -->
    <link rel="stylesheet" href="css/style_example.css">
    <style type="text/css">.BMap_cpyCtrl {display: none;}</style>
    <style type="text/css">.anchorBL{display:none;}</style>
    <style type="text/css">
    ul.breadcrumb {
      padding: 10px 16px;
      list-style: none;
    }
    ul.breadcrumb li {
      display: inline;
      font-size: 18px;
      font-family:"Times New Roman";
    }
    ul.breadcrumb li+li:before {
      padding: 8px;
      color: black;
      content: "/\00a0";
    }
    ul.breadcrumb li a {
      color: black;
      text-decoration: none;
    }
    ul.breadcrumb li:hover a:not(.checked){
      color:#26a69a;
    }
    .checked{
      font-size:20px;
      font-weight:bold;
    }
    .fade-enter-active,.fade-leave-active {
      transition: all .5s;
    }
    .fade-leave-to {
      opacity: 0;
      /* transform:translateX(100%);  */
    }
    .fade-enter{
      opacity: 0;
      /* transform:translateX(-100%);  */
    }
    strong{
      font-size:24px;
    }
</style>
</head>
<body>
    <div id="preloader"></div>    
    <!-- Dropdown Structure -->
    <ul id="dropdown1" class="dropdown-content" style="transform:translate(0px,64px)">
      <li>
        <a href="defination.html" style="text-align: center;">定义</a>
      </li>
      <li>
        <a href="whatis.html" style="text-align: center;">改造流程</a>
      </li>
      <li>
          <a href="../index.html#321" style="text-align: center;">设计导则</a>
        </li>
      <li>
        <a href="examples.html" style="text-align: center;">已完成案例</a>
      </li>
    </ul>

    <!-- 顶部导航栏 -->
  <nav class="white" role="navigation">
    <div class="nav-wrapper container left-align">
      <ul class="center hide-on-med-and-down">
        <li style="height: 64px;">
          <a id="logo-container" href="#" style="width: inherit;height: inherit;">
            <img src="img/logo.png" alt="" style="height: 80%;margin: 5%;">
          </a>
        </li>
        <li>
          <a href="/">首页</a>
        </li>
        <li>
          <a href="#!" class="dropdown-button" data-activates="dropdown1">关于畸零空间</a>
        </li>
      </ul>


      <!-- 侧边栏 -->
      <ul id="nav-mobile" class="side-nav">
        <li style="height: 64px;">
          <a id="logo-container" href="#" style="width: inherit;height: inherit;">
            <img src="img/logo.png" alt="" style="height: 50px;margin: 7px;">
          </a>
        </li>
        <li class="divider"></li>
        <li>
          <a href="/">
            <i class="material-icons">home</i>首页</a>
        </li>
        <li>
          <a href="defination.html" style="color:#26a69a">
            <i class="material-icons">create</i>畸零空间定义</a>
        </li>
        <li>
          <a href="whatis.html" style="color:#26a69a">
            <i class="material-icons">compare_arrows</i>畸零空间改造流程</a>
        </li>
        <li>
            <a href="../index.html#321" style="color:#26a69a">
              <i class="material-icons">highlight</i>畸零空间设计导则</a>
          </li>
        <li>
          <a href="examples.html" style="color:#26a69a">
            <i class="material-icons">done_all</i>已完成案例</a>
        </li>
        <li class="divider"></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse">
        <i class="material-icons">menu</i>
      </a>
    </div>
  </nav>
    
  <div class="section purple lighten-4" id="index-banner2">
    <div class="container">
      <div class="row">
        <div class="col s12">
          <h1 class="header white-text">项目详情</h1>
        </div>
      </div>
    </div>
  </div>
  <div class="modal" id="infoscreen" style="width: 200px;">
      <div class="modal-content">
        <p id="infotext">上传成功!</p>
        <a href="#!" class="btn purple lighten-4 right" style="margin-bottom: 20px;" onclick="closeAllModal()">确定</a>
      </div>
    </div>

<section class="ws-section-spacing bg-gray" id="project">
    <div class="container z-depth-2">  
      <div style="padding: 30px">
          <div class="row">
              <div class="col s11">
                  <h3 class="left" style="font-size:30px;padding:20px">基本信息</h3>
                </div>
              <div class="col s1">
                  <a href="#!" class="right" style="color:black" @click="updateProject" v-show="ifModified"><i class="material-icons prefix">save</i></a>
              </div>
            <div class="input-field col s12 m6">
              <i class="material-icons prefix">title</i>
              <input id="name" type="text" disabled>
              <label for="name" style="color:black">项目名称：{{name}}</label>
            </div>
            <div class="input-field col s12 m6">
                <i class="material-icons prefix">account_box</i>
                <input id="author" type="text" disabled>
                <label for="author" style="color:black">发起人：{{author}}</label>
              </div>
            <div class="input-field col s12 m6">
              <i class="material-icons prefix">phone</i>
              <input id="tel" type="text" disabled>              
              <label for="tel" style="color:black">联系方式：{{tel}}</label>
            </div>
            <div class="input-field col s12 m6" @mouseover="ifAuthor?ifHover_=true:''" @mouseout="ifHover_=false">
              <i class="material-icons prefix">monetization_on</i>
              <input id="budget" type="text" disabled v-model="budgetMod">              
              <label for="budget" id="budgetlabel" style="color:black">预算：{{budget}}</label>
              <a href="#!" class="right" style="transform: translate(-45px,0px);color:black" v-show="ifHover_" @click="enableBudget"><i class="material-icons prefix">mode_edit</i></a>
            </div>
            <div class="input-field col s6">
              <i class="material-icons prefix">star</i>
              <input id="demand" type="text" disabled>              
              <label for="demand" style="color:black">改造意向：{{demand}}</label>
            </div>
            <div class="input-field col s6" @mouseover="ifAuthor?ifHover=true:''" @mouseout="ifHover=false">
                <i class="material-icons prefix">timeline</i>
                <input id="state" type="text" disabled>              
                <label for="state" style="color:black">状态：{{showStatus()}}</label>
              <a href="#!" class="dropdown-button right" style="transform: translate(-45px,0px);color:black" data-activates="statedropdown" v-show="ifHover" @click="ifModified=true"><i class="material-icons prefix">mode_edit</i></a>
            </div>
            <!-- Dropdown Structure -->
       <div id="statedropdown" class="dropdown-content" style="transform:translate(0px,40px);min-height:260px;min-width:150px;">
          <form action="#">
            <p>
                <input name="group1" class="with-gap" type="radio" id="radio0" disabled/>
                <label for="radio0">提出</label>
              </p>
            <p>
              <input name="group1" class="with-gap" type="radio" id="radio1" value="2"  v-model="state"/>
              <label for="radio1">设计中</label>
            </p>
            <p>
              <input name="group1" class="with-gap" type="radio" id="radio2" value="3"  v-model="state"/>
              <label for="radio2">征求意见</label>
            </p>
            <p>
              <input class="with-gap" name="group1" type="radio" id="radio3" value="4"  v-model="state"/>
              <label for="radio3">施工中</label>
            </p>
            <p>
              <input name="group1" class="with-gap" type="radio" id="radio4" value="5"  v-model="state"/>
              <label for="radio4">已完成</label>
            </p>
          </form>
        </div>
            <div class="input-field col s12">
              <i class="material-icons prefix">place</i>
              <input id="address" type="text" disabled>              
              <label for="address" style="color:black">畸零空间地址：{{address}}</label>
            </div>
            <div class="col s12">
              <br>
            </div>
            </div>
            <div class="container">
              <div class="row">
                <div class="col s12">
                  <div id="bdmap" style="width: inherit;height: 250px;"></div>
                </div>
                <div class="col s12">
                  <input disabled id="coords" type="text" class="validate" v-bind:value="'lng：'+lng+'；lat：'+lat">
                </div>
              </div>
            </div>
            <br>
        </div>
    </div>
    <div class="container z-depth-1" style="height:950px">  
        <div style="padding: 30px;margin-top:30px;">
            <div class="row">
          <div class="container" style="width:90%">
              <div class="col s12">
                  <h3 style="font-size:30px;padding:20px">所有设计方案</h3>
                </div>
                <div class=" col s12 m12">
                    <ul class="breadcrumb">
                        <li v-for="design of designs" ><a href="#!" v-bind:id="design.id" @click="switchDesign($event)" v-bind:class="{'checked':design.ifchecked}">{{final_scheme===design.id?design.name+'(最终方案)':design.name}}</a></li>
                    </ul>
                </div>
                <HR style="border:3 dashed;color:#26a69a;margin-left: 20px;margin-bottom: 25px; " width="90%">
            <transition-group name="fade" mode="out-in">
              <div v-for="design of designs" v-show="design.ifchecked" v-bind:key="designs.indexOf(design)" style="position:absolute;width:70%">
              <div class="col m6 s12" style="height:650px;">
                <img :src="design.pic" alt="" style="width:100%;vertical-align: middle">
              </div>
              <div class="input-field col s12 m6">
                <i class="material-icons prefix">settings_overscan</i>
                <input id="size" type="text" disabled>
                <label for="size" style="color:black">大小：{{design.size}}</label>
              </div>
              <div class="input-field col s12 m6">
                  <i class="material-icons prefix">panorama_wide_angle</i>
                  <input id="surround" type="text" disabled>
                  <label for="surround" style="color:black">围合：{{design.surround}}</label>
                </div>
              <div class="input-field col s12 m6">
                  <i class="material-icons prefix">nature</i>
                  <input id="greenRate" type="text" disabled>
                  <label for="greenRate" style="color:black">绿地比例：{{design.green_rate}}</label>
                </div>
              <div class="input-field col s12 m6">
                  <i class="material-icons prefix">highlight</i>
                  <input id="function" type="text" disabled>
                  <label for="function" style="color:black">功能：{{design.func}}</label>
                </div>
              <div class="input-field col s12 m6">
                  <i class="material-icons prefix">style</i>
                  <input id="style" type="text" disabled>
                  <label for="style" style="color:black">风格：{{design.style}}</label>
                </div>
              <div class="input-field col s12 m6">
                  <i class="material-icons prefix">wallpaper</i>
                  <input id="viewFactor" type="text" disabled>
                  <label for="viewFactor" style="color:black">景观要素：{{design.view_factor}}</label>
                </div>
              <div class="input-field col s12 m6">
                  <i class="material-icons prefix">event_seat</i>
                  <input id="chairNum" type="text" disabled>
                  <label for="chairNum" style="color:black">座椅数量：{{design.chair_num}}</label>
                </div>
              <div class="input-field col s12 m6">
                  <i class="material-icons prefix">map</i>
                  <input id="isCovered" type="text" disabled>
                  <label for="isCovered" style="color:black">是否有顶棚：{{design.is_covered}}</label>
                </div>
                <div class="input-field col s12 m6">
                    <i class="material-icons prefix">favorite</i>
                    <input id="voted" type="text" disabled>
                    <label for="voted" style="color:black">获得票数：{{design.AlternativeScheme.vote_num}}</label>
                  </div>
                  <div class="col s12 m12 center">
                    <br>
                    <br>
                  </div>
                  <div class="col s12 m12 center">
                      <a v-bind:id="design.id" name="vote" href="#!" class="btn purple lighten-4 centered" @click="vote($event)" v-show="final_scheme===null&&!ifAuthor">投票</a>
                  </div>
                  <div class="col s12 m12 center">
                      <a v-bind:id="design.id" href="#!" class="btn purple lighten-4 centered" @click="finalize($event)" v-show="final_scheme===null&&ifAuthor">确定为最终方案</a>
                  </div>
              </div>
            </transition-group>
          </div>
        </div>  
    </div>
    </div>
    <div class="container z-depth-1" style="margin-top: 20px;padding:15px" @mouseover="(!ifAuthor)?ifHover__=true:''" @mouseout="ifHover__=false">
      <div class="row">
      <div class="col s11">
          <h3 class="left" style="font-size:30px;padding:20px">评论</h3>
        </div>
        <div class="col s1">
          <a href="#!" class="dropdown-button right" style="color:black" data-activates="commentdropdown" v-show="ifHover__"><i class="material-icons prefix">mode_edit</i></a>
        </div>
      </div>
        <div class="z-depth-2 container" style="width:90%;margin-top: 30px;padding:20px" v-for="comment of messages">
          <div class="row">
        <div class="col s4 m2">
          <img v-bind:src="comment.User.avatar" style="width:100%;border-radius: 50%;overflow:hidden;" name="avatar">  
        </div>
        <div class="col s8 m10" style="margin-bottom: 10px">
          <strong><span style="color:#26a69a">{{comment.User.type}}</span>：{{comment.User.nickname}}</strong>
        </div>
        <div class="col s8 m10">
            <p style="font-size:18px;text-indent: 36px;border:1px solid #cccccc;min-height: 100px;width:100%;border-radius: 8px;background-color: #fcfcfc;padding:10px">{{comment.message}}</p>
        </div>
      </div>
      </div>
    </div>
    <!-- Dropdown Structure -->
    <div id="commentdropdown" class="dropdown-content" data-stopPropagation="true" @click="stop($event)" style="transform:translate(0px,40px);min-height:30px;min-width:450px;padding:20px;border-radius: 12px">
        <div class="input-field">
          <textarea id="textarea" class="materialize-textarea" v-model="comment" ></textarea>
          <label for="textarea">写评论</label>
        </div>
        <a href="#!" class="right" style="transform: translate(0px,0px);color:black" @click="addComment"><i class="material-icons prefix">check</i></a>
    </div>
</section>

<footer class="page-footer teal">
    <div class="container">
        <div class="row">
            <div class="col l6 s12">
                <h5 class="white-text">Company Bio</h5>
                <p class="grey-text text-lighten-4">We are a team of college students working on this project like it's
                    our full time job. Any amount would help support and continue development on this project and is
                    greatly appreciated.</p>


            </div>
            <div class="col l3 s12">
                <h5 class="white-text">Settings</h5>
                <ul>
                    <li><a class="white-text" href="#!">Link 1</a></li>
                    <li><a class="white-text" href="#!">Link 2</a></li>
                    <li><a class="white-text" href="#!">Link 3</a></li>
                    <li><a class="white-text" href="#!">Link 4</a></li>
                </ul>
            </div>
            <div class="col l3 s12">
                <h5 class="white-text">Connect</h5>
                <ul>
                    <li><a class="white-text" href="#!">Link 1</a></li>
                    <li><a class="white-text" href="#!">Link 2</a></li>
                    <li><a class="white-text" href="#!">Link 3</a></li>
                    <li><a class="white-text" href="#!">Link 4</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="footer-copyright">
        <div class="container">
            Made by <a class="brown-text text-lighten-3" href="http://materializecss.com">Materialize</a>
        </div>
    </div>
</footer>


<!--  Scripts-->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=33X0NsFGdzK75bVRULnf3zGt4Os450GW"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
<script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
<script src="js/materialize.js"></script>
<script src="js/init.js"></script>
<script src="js/decodeDesign.js"></script>
<script src="js/projectDetail.js"></script>
<script>
    (function ($) {
        "use strict";
        var $main_window = $(window);
        vm.init();
        /*====================================
            preloader js
          ===================================*/
        $main_window.on('load', function () {
            $('#preloader').fadeOut('slow');
            var marker = new BMap.Marker({'lat': vm.lat,'lng': vm.lng});
            map.addOverlay(marker);
            $('[name="avatar"]').css('height',$('#avatar').width());
        });      
        $main_window.on('resize',function(){  
          $('[name="avatar"]').css('height',$('#avatar').width());    //监听窗口改变以自适应头像大小
        });
    })(jQuery);
</script>
</body>
</html>
